{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport { Terminal } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit';\nimport 'xterm/css/xterm.css';\nimport { debounce } from 'lodash';\nimport { getCurrentInstance, reactive, onBeforeUnmount, onUnmounted, toRefs, ref } from 'vue';\nexport default {\n  setup() {\n    onBeforeUnmount(() => {\n      removeResizeListener();\n      config.term && config.term.dispose();\n      config.ws.send(JSON.stringify({\n        type: 'stdin',\n        data: utf8_to_b64('exit')\n      }));\n    });\n    onUnmounted(() => {\n      config.ws.send(JSON.stringify({\n        type: 'stdin',\n        data: utf8_to_b64('exit')\n      }));\n    });\n    const {\n      proxy\n    } = getCurrentInstance();\n    const packResize = (cols, rows) => JSON.stringify({\n      type: 'resize',\n      cols: cols,\n      rows: rows\n    });\n    const validate = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('不能为空'));\n      } else {\n        callback();\n      }\n    };\n    const terminal = ref();\n    const config = reactive({\n      rules: {\n        ip: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        port: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        user: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        pwd: [{\n          validator: validate,\n          trigger: 'blur'\n        }]\n      },\n      activeName: 'first',\n      initText: '正在努力连接中...\\r\\n',\n      first: true,\n      term: null,\n      fitAddon: null,\n      ws: null,\n      socketUrl: proxy.$urls.m().ws,\n      form: {\n        user: '',\n        pwd: '',\n        ip: '',\n        port: ''\n      },\n      option: {\n        lineHeight: 1.0,\n        cursorBlink: true,\n        cursorStyle: 'block',\n        // 光标样式 'block' | 'underline' | 'bar'\n        fontSize: 15,\n        // fontcolor: '#000000',\n        fontFamily: \"Monaco, Menlo, Consolas, 'Courier New', monospace\",\n        theme: {\n          // 背景色\n          background: '#ffffff',\n          // 前景色\n          foreground: '#000000',\n          // 光标背景色\n          cursor: '#000000',\n          // 光标前景色\n          /** The accent color of the cursor (fg color for a block cursor) */\n          // cursorAccent: '#000000',\n          // 选择背景色\n          /** The selection background color (can be transparent) */\n          selection: '#0000ff',\n          // 选择前景色\n          /** The selection foreground color */\n          selectionForeground: '#0000ff'\n        },\n        cols: 30 // 初始化的时候不要设置fit，设置col为较小值（最小为可展示initText初始文字即可）方便屏幕缩放\n      }\n    });\n\n    const initWs = () => {\n      initTerm();\n      initSocket();\n      onTerminalResize();\n      onTerminalKeyPress();\n    };\n    const submitForm = formName => {\n      config.activeName = 'second';\n      initWs();\n    };\n    const resetForm = formName => {\n      formName.value.resetFields();\n    };\n    const handleClick = (tab, event) => {\n      if (tab.name === 'second') {\n        // this.init()\n      }\n    };\n    function utf8_to_b64(rawString) {\n      return btoa(unescape(encodeURIComponent(rawString)));\n    }\n    function b64_to_utf8(encodeString) {\n      return decodeURIComponent(escape(atob(encodeString)));\n    }\n    function bytesHuman(bytes, precision) {\n      if (!/^([-+])?|(\\.\\d+)(\\d+(\\.\\d+)?|(\\d+\\.)|Infinity)$/.test(bytes)) {\n        return '-';\n      }\n      if (bytes === 0) return '0';\n      if (typeof precision === 'undefined') precision = 1;\n      const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB', 'BB'];\n      const num = Math.floor(Math.log(bytes) / Math.log(1024));\n      const value = (bytes / Math.pow(1024, Math.floor(num))).toFixed(precision);\n      return `${value} ${units[num]}`;\n    }\n    function isWsOpen() {\n      return config.ws && config.ws.readyState === 1;\n    }\n    const initTerm = () => {\n      config.term = new Terminal(config.option);\n      config.fitAddon = new FitAddon();\n      config.term.loadAddon(config.fitAddon);\n      config.term.open(terminal);\n      // config.fitAddon.fit() // 初始化的时候不要使用fit\n      setTimeout(() => {\n        config.fitAddon.fit();\n      }, 500); // 必须延时处理\n    };\n\n    function onTerminalKeyPress() {\n      config.term.onData(data => {\n        isWsOpen() && config.ws.send(JSON.stringify({\n          type: 'stdin',\n          data: utf8_to_b64(data)\n        }));\n      });\n    }\n    function resizeRemoteTerminal() {\n      const {\n        cols,\n        rows\n      } = config.term;\n      console.log('列数、行数设置为：', cols, rows);\n      // 调整后端终端大小 使后端与前端终端大小一致\n      isWsOpen() && config.ws.send(packResize(cols, rows));\n    }\n    const onResize = debounce(function () {\n      config.fitAddon.fit();\n    }, 500);\n    function onTerminalResize() {\n      window.addEventListener('resize', onResize);\n      config.term.onResize(resizeRemoteTerminal);\n    }\n    function removeResizeListener() {\n      window.removeEventListener('resize', onResize);\n    }\n    const initSocket = () => {\n      config.term.write(config.initText);\n      console.log(config.socketUrl);\n      config.ws = new WebSocket(config.socketUrl, ['webssh']);\n      onOpenSocket();\n      onCloseSocket();\n      onErrorSocket();\n      config.term._initialized = true;\n      onMessageSocket();\n    };\n    const onOpenSocket = () => {\n      config.ws.onopen = () => {\n        console.log('websocket 已连接');\n        config.ws.send(JSON.stringify({\n          type: \"addr\",\n          data: utf8_to_b64(config.form.ip + ':' + config.form.port)\n        }));\n        // socket.send(JSON.stringify({ type: \"term\", data: utf8_to_b64(\"linux\") }));\n        config.ws.send(JSON.stringify({\n          type: \"login\",\n          data: utf8_to_b64(config.form.user)\n        }));\n        config.ws.send(JSON.stringify({\n          type: \"password\",\n          data: utf8_to_b64(config.form.pwd)\n        }));\n        config.term.reset();\n        setTimeout(() => {\n          resizeRemoteTerminal();\n        }, 500);\n      };\n    };\n    const onCloseSocket = () => {\n      config.ws.onclose = () => {\n        console.log('关闭连接');\n        config.term.write('未连接， 刷新后重连...\\r\\n');\n      };\n    };\n    const onErrorSocket = () => {\n      config.ws.onerror = () => {\n        config.term.write('连接失败，请刷新！');\n      };\n    };\n    const onMessageSocket = () => {\n      config.ws.onmessage = res => {\n        console.log(res);\n        const msg = JSON.parse(res.data);\n        const term = config.term;\n        // console.log(\"receive: \" + data)\n        // 第一次连接成功将 initText 清空\n        if (config.first) {\n          config.first = false;\n          term.reset();\n          term.element && term.focus();\n          resizeRemoteTerminal();\n        }\n        term.write(b64_to_utf8(msg.data));\n      };\n    };\n    return {\n      ...toRefs(config),\n      submitForm,\n      resetForm,\n      handleClick,\n      terminal\n    };\n  }\n};","map":{"version":3,"names":["Terminal","FitAddon","debounce","getCurrentInstance","reactive","onBeforeUnmount","onUnmounted","toRefs","ref","setup","removeResizeListener","config","term","dispose","ws","send","JSON","stringify","type","data","utf8_to_b64","proxy","packResize","cols","rows","validate","rule","value","callback","Error","terminal","rules","ip","validator","trigger","port","user","pwd","activeName","initText","first","fitAddon","socketUrl","$urls","m","form","option","lineHeight","cursorBlink","cursorStyle","fontSize","fontFamily","theme","background","foreground","cursor","selection","selectionForeground","initWs","initTerm","initSocket","onTerminalResize","onTerminalKeyPress","submitForm","formName","resetForm","resetFields","handleClick","tab","event","name","rawString","btoa","unescape","encodeURIComponent","b64_to_utf8","encodeString","decodeURIComponent","escape","atob","bytesHuman","bytes","precision","test","units","num","Math","floor","log","pow","toFixed","isWsOpen","readyState","loadAddon","open","setTimeout","fit","onData","resizeRemoteTerminal","console","onResize","window","addEventListener","removeEventListener","write","WebSocket","onOpenSocket","onCloseSocket","onErrorSocket","_initialized","onMessageSocket","onopen","reset","onclose","onerror","onmessage","res","msg","parse","element","focus"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\webssh\\webssh.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\" style=\"margin-left: 1vh; margin-right: 1vh\">\r\n      <el-tab-pane name=\"first\" label=\"连接配置\">\r\n        <div style=\"text-align: center\">\r\n          <el-form ref=\"form\" :model=\"form\" status-icon :rules=\"rules\" label-position=\"left\" label-width=\"80px\" style=\"margin-left: 50vh; width: 50vh\">\r\n            <el-form-item label=\"IP地址\" prop=\"ip\">\r\n              <el-input v-model=\"form.ip\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"端口号\" prop=\"port\">\r\n              <el-input v-model=\"form.port\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户名\" prop=\"user\">\r\n              <el-input v-model=\"form.user\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" prop=\"pwd\">\r\n              <el-input v-model=\"form.pwd\" type=\"password\" show-password/>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitForm('form')\">连接</el-button>\r\n              <el-button @click=\"resetForm('form')\">重置</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-tab-pane>\r\n      <el-tab-pane name=\"second\" label=\"终端\">\r\n        <div class=\"ssh-container\" ref=\"terminal\"></div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Terminal } from 'xterm'\r\nimport { FitAddon } from 'xterm-addon-fit'\r\nimport 'xterm/css/xterm.css'\r\nimport { debounce } from 'lodash'\r\nimport { getCurrentInstance, reactive,onBeforeUnmount,onUnmounted, toRefs,ref  } from 'vue'\r\n\r\nexport default {\r\n  setup() {\r\n\r\n    onBeforeUnmount(()=>{\r\n      removeResizeListener()\r\n      config.term && config.term.dispose()\r\n      config.ws.send(JSON.stringify({\r\n        type: 'stdin',\r\n        data: utf8_to_b64('exit')\r\n      }))\r\n    })\r\n\r\n    onUnmounted(()=>{\r\n      config.ws.send(JSON.stringify({\r\n          type: 'stdin',\r\n          data: utf8_to_b64('exit')\r\n        }))\r\n    }) \r\n\r\n    const {proxy} = getCurrentInstance()\r\n    \r\n\r\n    const packResize = (cols, rows) =>\r\n      JSON.stringify({\r\n        type: 'resize',\r\n        cols: cols,\r\n        rows: rows\r\n    })\r\n\r\n    const validate = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('不能为空'));\r\n      } else {\r\n        callback();\r\n      }\r\n    }\r\n    const terminal = ref()\r\n  \r\n    const config = reactive({\r\n      rules: {\r\n          ip: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n          port: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n          user: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n          pwd: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n        },\r\n      activeName: 'first',\r\n      initText: '正在努力连接中...\\r\\n',\r\n      first: true,\r\n      term: null,\r\n      fitAddon: null,\r\n      ws: null,\r\n      socketUrl: proxy.$urls.m().ws,\r\n      form: {\r\n        user: '',\r\n        pwd: '',\r\n        ip: '',\r\n        port: '',\r\n      },\r\n      option: {\r\n        lineHeight: 1.0,\r\n        cursorBlink: true,\r\n        cursorStyle: 'block', // 光标样式 'block' | 'underline' | 'bar'\r\n        fontSize: 15,\r\n        // fontcolor: '#000000',\r\n        fontFamily: \"Monaco, Menlo, Consolas, 'Courier New', monospace\",\r\n        theme: {\r\n          // 背景色\r\n          background: '#ffffff',\r\n          // 前景色\r\n          foreground: '#000000',\r\n          // 光标背景色\r\n          cursor: '#000000',\r\n          // 光标前景色\r\n          /** The accent color of the cursor (fg color for a block cursor) */\r\n          // cursorAccent: '#000000',\r\n          // 选择背景色\r\n          /** The selection background color (can be transparent) */\r\n          selection: '#0000ff',\r\n          // 选择前景色\r\n          /** The selection foreground color */\r\n          selectionForeground: '#0000ff'\r\n        },\r\n        cols: 30 // 初始化的时候不要设置fit，设置col为较小值（最小为可展示initText初始文字即可）方便屏幕缩放\r\n      }\r\n    })\r\n\r\n    const initWs = ()=> {\r\n        initTerm()\r\n        initSocket()\r\n        onTerminalResize()\r\n        onTerminalKeyPress()\r\n    }\r\n\r\n    const submitForm = (formName)=> {\r\n      config.activeName = 'second'\r\n      initWs()\r\n    }\r\n\r\n    const resetForm = (formName)=> {\r\n        formName.value.resetFields();\r\n    }\r\n\r\n    const handleClick = (tab, event)=> {\r\n        if (tab.name === 'second') {\r\n          // this.init()\r\n        }\r\n    }\r\n\r\n    function utf8_to_b64(rawString) {\r\n        return btoa(unescape(encodeURIComponent(rawString)));\r\n    }\r\n\r\n    function b64_to_utf8(encodeString) {\r\n        return decodeURIComponent(escape(atob(encodeString)));\r\n    }\r\n\r\n    function  bytesHuman(bytes, precision) {\r\n        if (!/^([-+])?|(\\.\\d+)(\\d+(\\.\\d+)?|(\\d+\\.)|Infinity)$/.test(bytes)) {\r\n          return '-'\r\n        }\r\n        if (bytes === 0) return '0';\r\n        if (typeof precision === 'undefined') precision = 1;\r\n        const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB', 'BB'];\r\n        const num = Math.floor(Math.log(bytes) / Math.log(1024));\r\n        const value = (bytes / Math.pow(1024, Math.floor(num))).toFixed(precision);\r\n        return `${value} ${units[num]}`\r\n    }\r\n\r\n    function isWsOpen() {\r\n        return config.ws && config.ws.readyState === 1\r\n    }\r\n    \r\n    const initTerm = ()=> {\r\n        config.term = new Terminal(config.option)\r\n        config.fitAddon = new FitAddon()\r\n        config.term.loadAddon(config.fitAddon)\r\n        config.term.open(terminal)\r\n        // config.fitAddon.fit() // 初始化的时候不要使用fit\r\n        setTimeout(() => {\r\n          config.fitAddon.fit()\r\n        }, 500); // 必须延时处理\r\n    }\r\n\r\n    function onTerminalKeyPress() {\r\n        config.term.onData(data => {\r\n          isWsOpen() && config.ws.send(JSON.stringify({\r\n            type: 'stdin',\r\n            data: utf8_to_b64(data)\r\n          }))\r\n        })\r\n    }\r\n\r\n    function resizeRemoteTerminal() {\r\n        const { cols, rows } = config.term\r\n        console.log('列数、行数设置为：', cols, rows)\r\n        // 调整后端终端大小 使后端与前端终端大小一致\r\n        isWsOpen() && config.ws.send(packResize(cols, rows))\r\n      }\r\n    \r\n    const onResize = debounce(function () {\r\n        config.fitAddon.fit()\r\n      }, 500)\r\n  \r\n    function onTerminalResize() {\r\n        window.addEventListener('resize', onResize)\r\n        config.term.onResize(resizeRemoteTerminal)\r\n    }\r\n\r\n    function removeResizeListener() {\r\n        window.removeEventListener('resize', onResize)\r\n    }\r\n\r\n    const initSocket = ()=> {\r\n        config.term.write(config.initText)\r\n        console.log(config.socketUrl)\r\n        config.ws = new WebSocket(config.socketUrl,['webssh'])\r\n        onOpenSocket()\r\n        onCloseSocket()\r\n        onErrorSocket()\r\n        config.term._initialized = true\r\n        onMessageSocket()\r\n    }\r\n\r\n    const onOpenSocket = ()=> {\r\n        config.ws.onopen = () => {\r\n          console.log('websocket 已连接')\r\n          config.ws.send(JSON.stringify({ type: \"addr\", data: utf8_to_b64(config.form.ip + ':' + config.form.port) }));\r\n          // socket.send(JSON.stringify({ type: \"term\", data: utf8_to_b64(\"linux\") }));\r\n          config.ws.send(JSON.stringify({ type: \"login\", data: utf8_to_b64(config.form.user) }));\r\n          config.ws.send(JSON.stringify({ type: \"password\", data: utf8_to_b64(config.form.pwd) }));\r\n          config.term.reset()\r\n          setTimeout(() => {\r\n            resizeRemoteTerminal()\r\n          }, 500)\r\n        }\r\n    }\r\n\r\n    const onCloseSocket =()=> {\r\n        config.ws.onclose = () => {\r\n          console.log('关闭连接')\r\n          config.term.write('未连接， 刷新后重连...\\r\\n');\r\n        }\r\n    }\r\n    \r\n    const onErrorSocket =()=> {\r\n        config.ws.onerror = () => {\r\n          config.term.write('连接失败，请刷新！')\r\n        }\r\n    }\r\n\r\n    const onMessageSocket = ()=> {\r\n        config.ws.onmessage = res => {\r\n          console.log(res)\r\n          const msg = JSON.parse(res.data)\r\n          const term = config.term\r\n          // console.log(\"receive: \" + data)\r\n          // 第一次连接成功将 initText 清空\r\n          if (config.first) {\r\n            config.first = false\r\n            term.reset()\r\n            term.element && term.focus()\r\n            resizeRemoteTerminal()\r\n          }\r\n          term.write(b64_to_utf8(msg.data))\r\n        }\r\n    }\r\n\r\n\r\n    return {\r\n      ...toRefs(config),\r\n      submitForm,\r\n      resetForm,\r\n      handleClick,\r\n      terminal\r\n    }\r\n\r\n  }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\">\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.ssh-container {\r\n  overflow: hidden;\r\n  height: 85vh;\r\n  border-radius: 4px;\r\n  background: rgb(255, 255, 255);\r\n  padding: 0px;\r\n  //color: rgb(0, 0, 0);\r\n\r\n  .xterm-scroll-area::-webkit-scrollbar-thumb {\r\n    background-color: #b7c4d1;\r\n    /* 滚动条的背景颜色 */\r\n  }\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}