{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport { Terminal } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit';\nimport 'xterm/css/xterm.css';\nimport { debounce } from 'lodash';\nimport { getCurrentInstance } from 'vue';\nconst packResize = (cols, rows) => JSON.stringify({\n  type: 'resize',\n  cols: cols,\n  rows: rows\n});\nexport default {\n  name: 'MyTerminal',\n  created() {\n    this.form.ip = this.$route.query.ip || '';\n    this.form.port = this.$route.query.port || '';\n  },\n  data() {\n    const {\n      proxy\n    } = getCurrentInstance();\n    var validate = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('不能为空'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      rules: {\n        ip: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        port: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        user: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        pwd: [{\n          validator: validate,\n          trigger: 'blur'\n        }]\n      },\n      activeName: 'first',\n      initText: '正在努力连接中...\\r\\n',\n      first: true,\n      term: null,\n      fitAddon: null,\n      ws: null,\n      socketUrl: proxy.$urls.m().ws,\n      form: {\n        user: '',\n        pwd: '',\n        ip: '',\n        port: ''\n      },\n      option: {\n        lineHeight: 1.0,\n        cursorBlink: true,\n        cursorStyle: 'block',\n        // 光标样式 'block' | 'underline' | 'bar'\n        fontSize: 15,\n        // fontcolor: '#000000',\n        fontFamily: \"Monaco, Menlo, Consolas, 'Courier New', monospace\",\n        theme: {\n          // 背景色\n          background: '#ffffff',\n          // 前景色\n          foreground: '#000000',\n          // 光标背景色\n          cursor: '#000000',\n          // 光标前景色\n          /** The accent color of the cursor (fg color for a block cursor) */\n          // cursorAccent: '#000000',\n          // 选择背景色\n          /** The selection background color (can be transparent) */\n          selection: '#0000ff',\n          // 选择前景色\n          /** The selection foreground color */\n          selectionForeground: '#0000ff'\n        },\n        cols: 30 // 初始化的时候不要设置fit，设置col为较小值（最小为可展示initText初始文字即可）方便屏幕缩放\n      }\n    };\n  },\n\n  // mounted() {\n  //   this.initTerm()\n  //   this.initSocket()\n  //\n  //   this.onTerminalResize()\n  //   this.onTerminalKeyPress()\n  // },\n  beforeDestroy() {\n    this.removeResizeListener();\n    this.term && this.term.dispose();\n    this.ws.send(JSON.stringify({\n      type: 'stdin',\n      data: this.utf8_to_b64('exit')\n    }));\n  },\n  methods: {\n    destroyed() {\n      this.ws.send(JSON.stringify({\n        type: 'stdin',\n        data: this.utf8_to_b64('exit')\n      }));\n    },\n    initWs() {\n      this.initTerm();\n      this.initSocket();\n      this.onTerminalResize();\n      this.onTerminalKeyPress();\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.activeName = 'second';\n          this.initWs();\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    handleClick(tab, event) {\n      if (tab.name === 'second') {\n        // this.init()\n      }\n    },\n    utf8_to_b64(rawString) {\n      return btoa(unescape(encodeURIComponent(rawString)));\n    },\n    b64_to_utf8(encodeString) {\n      return decodeURIComponent(escape(atob(encodeString)));\n    },\n    bytesHuman(bytes, precision) {\n      if (!/^([-+])?|(\\.\\d+)(\\d+(\\.\\d+)?|(\\d+\\.)|Infinity)$/.test(bytes)) {\n        return '-';\n      }\n      if (bytes === 0) return '0';\n      if (typeof precision === 'undefined') precision = 1;\n      const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB', 'BB'];\n      const num = Math.floor(Math.log(bytes) / Math.log(1024));\n      const value = (bytes / Math.pow(1024, Math.floor(num))).toFixed(precision);\n      return `${value} ${units[num]}`;\n    },\n    isWsOpen() {\n      return this.ws && this.ws.readyState === 1;\n    },\n    initTerm() {\n      this.term = new Terminal(this.option);\n      this.fitAddon = new FitAddon();\n      this.term.loadAddon(this.fitAddon);\n      this.term.open(this.$refs.terminal);\n      // this.fitAddon.fit() // 初始化的时候不要使用fit\n      setTimeout(() => {\n        this.fitAddon.fit();\n      }, 500); // 必须延时处理\n    },\n\n    onTerminalKeyPress() {\n      this.term.onData(data => {\n        this.isWsOpen() && this.ws.send(JSON.stringify({\n          type: 'stdin',\n          data: this.utf8_to_b64(data)\n        }));\n      });\n    },\n    // resize 相关\n    resizeRemoteTerminal() {\n      const {\n        cols,\n        rows\n      } = this.term;\n      console.log('列数、行数设置为：', cols, rows);\n      // 调整后端终端大小 使后端与前端终端大小一致\n      this.isWsOpen() && this.ws.send(packResize(cols, rows));\n    },\n    onResize: debounce(function () {\n      this.fitAddon.fit();\n    }, 500),\n    onTerminalResize() {\n      window.addEventListener('resize', this.onResize);\n      this.term.onResize(this.resizeRemoteTerminal);\n    },\n    removeResizeListener() {\n      window.removeEventListener('resize', this.onResize);\n    },\n    // socket\n    initSocket() {\n      this.term.write(this.initText);\n      console.log(this.socketUrl);\n      this.ws = new WebSocket(this.socketUrl, ['webssh']);\n      this.onOpenSocket();\n      this.onCloseSocket();\n      this.onErrorSocket();\n      this.term._initialized = true;\n      this.onMessageSocket();\n    },\n    // 打开连接\n    onOpenSocket() {\n      this.ws.onopen = () => {\n        console.log('websocket 已连接');\n        this.ws.send(JSON.stringify({\n          type: \"addr\",\n          data: this.utf8_to_b64(this.form.ip + ':' + this.form.port)\n        }));\n        // socket.send(JSON.stringify({ type: \"term\", data: utf8_to_b64(\"linux\") }));\n        this.ws.send(JSON.stringify({\n          type: \"login\",\n          data: this.utf8_to_b64(this.form.user)\n        }));\n        this.ws.send(JSON.stringify({\n          type: \"password\",\n          data: this.utf8_to_b64(this.form.pwd)\n        }));\n        this.term.reset();\n        setTimeout(() => {\n          this.resizeRemoteTerminal();\n        }, 500);\n      };\n    },\n    // 关闭连接\n    onCloseSocket() {\n      this.ws.onclose = () => {\n        console.log('关闭连接');\n        this.term.write('未连接， 刷新后重连...\\r\\n');\n        // setTimeout(() => {\n        //   this.initSocket();\n        // }, 3000)\n      };\n    },\n\n    // 连接错误\n    onErrorSocket() {\n      this.ws.onerror = () => {\n        this.term.write('连接失败，请刷新！');\n      };\n    },\n    // 接收消息\n    onMessageSocket() {\n      this.ws.onmessage = res => {\n        console.log(res);\n        const msg = JSON.parse(res.data);\n        const term = this.term;\n        // console.log(\"receive: \" + data)\n        // 第一次连接成功将 initText 清空\n        if (this.first) {\n          this.first = false;\n          term.reset();\n          term.element && term.focus();\n          this.resizeRemoteTerminal();\n        }\n        term.write(this.b64_to_utf8(msg.data));\n      };\n    }\n  }\n};\n//","map":{"version":3,"names":["Terminal","FitAddon","debounce","getCurrentInstance","packResize","cols","rows","JSON","stringify","type","name","created","form","ip","$route","query","port","data","proxy","validate","rule","value","callback","Error","rules","validator","trigger","user","pwd","activeName","initText","first","term","fitAddon","ws","socketUrl","$urls","m","option","lineHeight","cursorBlink","cursorStyle","fontSize","fontFamily","theme","background","foreground","cursor","selection","selectionForeground","beforeDestroy","removeResizeListener","dispose","send","utf8_to_b64","methods","destroyed","initWs","initTerm","initSocket","onTerminalResize","onTerminalKeyPress","submitForm","formName","$refs","valid","console","log","resetForm","resetFields","handleClick","tab","event","rawString","btoa","unescape","encodeURIComponent","b64_to_utf8","encodeString","decodeURIComponent","escape","atob","bytesHuman","bytes","precision","test","units","num","Math","floor","pow","toFixed","isWsOpen","readyState","loadAddon","open","terminal","setTimeout","fit","onData","resizeRemoteTerminal","onResize","window","addEventListener","removeEventListener","write","WebSocket","onOpenSocket","onCloseSocket","onErrorSocket","_initialized","onMessageSocket","onopen","reset","onclose","onerror","onmessage","res","msg","parse","element","focus"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\webssh\\webssh.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\" style=\"margin-left: 1vh; margin-right: 1vh\">\r\n        <el-tab-pane name=\"first\" label=\"连接配置\">\r\n          <div style=\"text-align: center\">\r\n            <el-form ref=\"form\" :model=\"form\" status-icon :rules=\"rules\" label-position=\"left\" label-width=\"80px\" style=\"margin-left: 50vh; width: 50vh\">\r\n              <el-form-item label=\"Ip\" prop=\"ip\">\r\n                <el-input v-model=\"form.ip\"/>\r\n              </el-form-item>\r\n              <el-form-item label=\"Port\" prop=\"port\">\r\n                <el-input v-model=\"form.port\"/>\r\n              </el-form-item>\r\n              <el-form-item label=\"User\" prop=\"user\">\r\n                <el-input v-model=\"form.user\"/>\r\n              </el-form-item>\r\n              <el-form-item label=\"Password\" prop=\"pwd\">\r\n                <el-input v-model=\"form.pwd\" type=\"password\"/>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm('form')\">连接</el-button>\r\n                <el-button @click=\"resetForm('form')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane name=\"second\" label=\"终端\">\r\n          <div class=\"ssh-container\" ref=\"terminal\"></div>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { Terminal } from 'xterm'\r\n  import { FitAddon } from 'xterm-addon-fit'\r\n  import 'xterm/css/xterm.css'\r\n  import { debounce } from 'lodash'\r\n  import { getCurrentInstance } from 'vue'\r\n  \r\n  const packResize = (cols, rows) =>\r\n    JSON.stringify({\r\n      type: 'resize',\r\n      cols: cols,\r\n      rows: rows\r\n    })\r\n  export default {\r\n    name: 'MyTerminal',\r\n    created() {\r\n      this.form.ip = this.$route.query.ip || ''\r\n      this.form.port = this.$route.query.port || ''\r\n    },\r\n    data() {\r\n      const {proxy} = getCurrentInstance()\r\n      var validate = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('不能为空'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        rules: {\r\n          ip: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n          port: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n          user: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n          pwd: [\r\n            {validator: validate, trigger: 'blur'}\r\n          ],\r\n        },\r\n        activeName: 'first',\r\n        initText: '正在努力连接中...\\r\\n',\r\n        first: true,\r\n        term: null,\r\n        fitAddon: null,\r\n        ws: null,\r\n        socketUrl: proxy.$urls.m().ws,\r\n        form: {\r\n          user: '',\r\n          pwd: '',\r\n          ip: '',\r\n          port: '',\r\n        },\r\n        option: {\r\n          lineHeight: 1.0,\r\n          cursorBlink: true,\r\n          cursorStyle: 'block', // 光标样式 'block' | 'underline' | 'bar'\r\n          fontSize: 15,\r\n          // fontcolor: '#000000',\r\n          fontFamily: \"Monaco, Menlo, Consolas, 'Courier New', monospace\",\r\n          theme: {\r\n            // 背景色\r\n            background: '#ffffff',\r\n            // 前景色\r\n            foreground: '#000000',\r\n            // 光标背景色\r\n            cursor: '#000000',\r\n            // 光标前景色\r\n            /** The accent color of the cursor (fg color for a block cursor) */\r\n            // cursorAccent: '#000000',\r\n            // 选择背景色\r\n            /** The selection background color (can be transparent) */\r\n            selection: '#0000ff',\r\n            // 选择前景色\r\n            /** The selection foreground color */\r\n            selectionForeground: '#0000ff'\r\n          },\r\n          cols: 30 // 初始化的时候不要设置fit，设置col为较小值（最小为可展示initText初始文字即可）方便屏幕缩放\r\n        }\r\n      }\r\n    },\r\n    // mounted() {\r\n    //   this.initTerm()\r\n    //   this.initSocket()\r\n    //\r\n    //   this.onTerminalResize()\r\n    //   this.onTerminalKeyPress()\r\n    // },\r\n    beforeDestroy() {\r\n      this.removeResizeListener()\r\n      this.term && this.term.dispose()\r\n      this.ws.send(JSON.stringify({\r\n        type: 'stdin',\r\n        data: this.utf8_to_b64('exit')\r\n      }))\r\n    },\r\n    methods: {\r\n      destroyed(){\r\n        this.ws.send(JSON.stringify({\r\n          type: 'stdin',\r\n          data: this.utf8_to_b64('exit')\r\n        }))\r\n      },\r\n      initWs() {\r\n        this.initTerm()\r\n        this.initSocket()\r\n        this.onTerminalResize()\r\n        this.onTerminalKeyPress()\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.activeName = 'second'\r\n            this.initWs()\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      },\r\n      handleClick(tab, event) {\r\n        if (tab.name === 'second') {\r\n          // this.init()\r\n        }\r\n      },\r\n      utf8_to_b64(rawString) {\r\n        return btoa(unescape(encodeURIComponent(rawString)));\r\n      },\r\n      b64_to_utf8(encodeString) {\r\n        return decodeURIComponent(escape(atob(encodeString)));\r\n      },\r\n      bytesHuman(bytes, precision) {\r\n        if (!/^([-+])?|(\\.\\d+)(\\d+(\\.\\d+)?|(\\d+\\.)|Infinity)$/.test(bytes)) {\r\n          return '-'\r\n        }\r\n        if (bytes === 0) return '0';\r\n        if (typeof precision === 'undefined') precision = 1;\r\n        const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB', 'BB'];\r\n        const num = Math.floor(Math.log(bytes) / Math.log(1024));\r\n        const value = (bytes / Math.pow(1024, Math.floor(num))).toFixed(precision);\r\n        return `${value} ${units[num]}`\r\n      },\r\n      isWsOpen() {\r\n        return this.ws && this.ws.readyState === 1\r\n      },\r\n      initTerm() {\r\n        this.term = new Terminal(this.option)\r\n        this.fitAddon = new FitAddon()\r\n        this.term.loadAddon(this.fitAddon)\r\n        this.term.open(this.$refs.terminal)\r\n        // this.fitAddon.fit() // 初始化的时候不要使用fit\r\n        setTimeout(() => {\r\n          this.fitAddon.fit()\r\n        }, 500); // 必须延时处理\r\n      },\r\n      onTerminalKeyPress() {\r\n        this.term.onData(data => {\r\n          this.isWsOpen() && this.ws.send(JSON.stringify({\r\n            type: 'stdin',\r\n            data: this.utf8_to_b64(data)\r\n          }))\r\n        })\r\n      },\r\n      // resize 相关\r\n      resizeRemoteTerminal() {\r\n        const { cols, rows } = this.term\r\n        console.log('列数、行数设置为：', cols, rows)\r\n        // 调整后端终端大小 使后端与前端终端大小一致\r\n        this.isWsOpen() && this.ws.send(packResize(cols, rows))\r\n      },\r\n      onResize: debounce(function () {\r\n        this.fitAddon.fit()\r\n      }, 500),\r\n      onTerminalResize() {\r\n        window.addEventListener('resize', this.onResize)\r\n        this.term.onResize(this.resizeRemoteTerminal)\r\n      },\r\n      removeResizeListener() {\r\n        window.removeEventListener('resize', this.onResize)\r\n      },\r\n      // socket\r\n      initSocket() {\r\n        this.term.write(this.initText)\r\n        console.log(this.socketUrl)\r\n        this.ws = new WebSocket(this.socketUrl,['webssh'])\r\n        this.onOpenSocket()\r\n        this.onCloseSocket()\r\n        this.onErrorSocket()\r\n        this.term._initialized = true\r\n        this.onMessageSocket()\r\n      },\r\n      // 打开连接\r\n      onOpenSocket() {\r\n        this.ws.onopen = () => {\r\n          console.log('websocket 已连接')\r\n          this.ws.send(JSON.stringify({ type: \"addr\", data: this.utf8_to_b64(this.form.ip + ':' + this.form.port) }));\r\n          // socket.send(JSON.stringify({ type: \"term\", data: utf8_to_b64(\"linux\") }));\r\n          this.ws.send(JSON.stringify({ type: \"login\", data: this.utf8_to_b64(this.form.user) }));\r\n          this.ws.send(JSON.stringify({ type: \"password\", data: this.utf8_to_b64(this.form.pwd) }));\r\n          this.term.reset()\r\n          setTimeout(() => {\r\n            this.resizeRemoteTerminal()\r\n          }, 500)\r\n        }\r\n      },\r\n  \r\n      // 关闭连接\r\n      onCloseSocket() {\r\n        this.ws.onclose = () => {\r\n          console.log('关闭连接')\r\n          this.term.write('未连接， 刷新后重连...\\r\\n');\r\n          // setTimeout(() => {\r\n          //   this.initSocket();\r\n          // }, 3000)\r\n        }\r\n      },\r\n      // 连接错误\r\n      onErrorSocket() {\r\n        this.ws.onerror = () => {\r\n          this.term.write('连接失败，请刷新！')\r\n        }\r\n      },\r\n      // 接收消息\r\n      onMessageSocket() {\r\n        this.ws.onmessage = res => {\r\n          console.log(res)\r\n          const msg = JSON.parse(res.data)\r\n          const term = this.term\r\n          // console.log(\"receive: \" + data)\r\n          // 第一次连接成功将 initText 清空\r\n          if (this.first) {\r\n            this.first = false\r\n            term.reset()\r\n            term.element && term.focus()\r\n            this.resizeRemoteTerminal()\r\n          }\r\n          term.write(this.b64_to_utf8(msg.data))\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //\r\n  </script>\r\n  <style lang=\"scss\">\r\n  body {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n  \r\n  .ssh-container {\r\n    overflow: hidden;\r\n    height: 85vh;\r\n    border-radius: 4px;\r\n    background: rgb(255, 255, 255);\r\n    padding: 0px;\r\n    //color: rgb(0, 0, 0);\r\n  \r\n    .xterm-scroll-area::-webkit-scrollbar-thumb {\r\n      background-color: #b7c4d1;\r\n      /* 滚动条的背景颜色 */\r\n    }\r\n  }\r\n  </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}