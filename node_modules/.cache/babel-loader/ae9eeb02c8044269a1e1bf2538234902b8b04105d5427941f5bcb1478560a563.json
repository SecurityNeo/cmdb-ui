{"ast":null,"code":"import { reactive, toRefs, getCurrentInstance } from 'vue';\nexport default {\n  setup() {\n    const tag = reactive({\n      id: 0,\n      name: \"\",\n      description: \"\"\n    });\n    const config = reactive({\n      centerDialogVisible: false,\n      isLoading: false\n    });\n    const {\n      proxy\n    } = getCurrentInstance();\n    const updateTag = async () => {\n      config.isLoading = true;\n      const rest = await new proxy.$request(proxy.$urls.m().tagUpdate, tag).modepost();\n      if (rest.data.code !== 200) {\n        new proxy.$tips(\"更新标签失败，稍后重试\", \"error\").notify();\n      }\n      config.isLoading = false;\n      config.centerDialogVisible = false;\n      proxy.$emit('flushPage');\n    };\n    const updateTagDialog = tagDetail => {\n      config.centerDialogVisible = true;\n      tag.id = tagDetail.id;\n      tag.name = tagDetail.name;\n      tag.description = tagDetail.description;\n    };\n    return {\n      ...toRefs(tag),\n      config,\n      updateTag,\n      updateTagDialog\n    };\n  }\n};","map":{"version":3,"names":["reactive","toRefs","getCurrentInstance","setup","tag","id","name","description","config","centerDialogVisible","isLoading","proxy","updateTag","rest","$request","$urls","m","tagUpdate","modepost","data","code","$tips","notify","$emit","updateTagDialog","tagDetail"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\resource\\tag\\components\\updatetag-dialog.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-dialog\r\n            v-model=config.centerDialogVisible\r\n            title=\"编辑标签\"\r\n            width=\"30%\"\r\n            align-center\r\n            :close-on-click-modal=\"false\"            \r\n        >\r\n        <div>\r\n            <div class=\"input-float \">\r\n                <div class=\"input_key\">\r\n                    名称\r\n                </div>\r\n                <div class=\"input_value\">\r\n                    <el-input v-model=\"name\" clearable class=\"inputflex\"  placeholder=\"请输入标签名称\"  />\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"input-float \">\r\n                <div class=\"input_key\">\r\n                    描述\r\n                </div>\r\n                <div class=\"input_value\">\r\n                    <el-input v-model=\"description\" clearable type=\"textarea\" class=\"inputflex\"  placeholder=\"请输入描述信息\"  />\r\n                </div>\r\n            </div>\r\n        \r\n            <div style=\"float: right; margin-bottom: 40px; margin-right: 72px;margin-top: 20px;\">\r\n                <el-button @click=\"config.centerDialogVisible = false\">取消</el-button>\r\n                <el-button type=\"primary\" :loading=\"config.isLoading\" @click=\"updateTag\" >确认</el-button>\r\n            </div>\r\n                      \r\n\r\n        </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {reactive, toRefs, getCurrentInstance} from 'vue'\r\n\r\nexport default {\r\n    setup() {\r\n        const tag = reactive({\r\n            id: 0,\r\n            name: \"\",\r\n            description: \"\"\r\n        })\r\n\r\n        const config = reactive({\r\n            centerDialogVisible: false,\r\n            isLoading: false\r\n        })\r\n\r\n        const {proxy} = getCurrentInstance()\r\n        const updateTag = async() => {\r\n\r\n            config.isLoading = true\r\n            const rest = await new proxy.$request(proxy.$urls.m().tagUpdate, tag).modepost()\r\n            if (rest.data.code !== 200) {\r\n                new proxy.$tips(\"更新标签失败，稍后重试\", \"error\").notify()\r\n            }\r\n            config.isLoading = false\r\n            config.centerDialogVisible = false\r\n            proxy.$emit('flushPage')\r\n        }\r\n\r\n        const updateTagDialog = (tagDetail)=> {\r\n            config.centerDialogVisible = true\r\n            tag.id = tagDetail.id\r\n            tag.name = tagDetail.name\r\n            tag.description = tagDetail.description\r\n        }\r\n\r\n        return {...toRefs(tag), config, updateTag, updateTagDialog}\r\n    }\r\n}\r\n</script>"],"mappings":"AAwCA,SAAQA,QAAQ,EAAEC,MAAM,EAAEC,kBAAkB,QAAO,KAAI;AAEvD,eAAe;EACXC,KAAKA,CAAA,EAAG;IACJ,MAAMC,GAAE,GAAIJ,QAAQ,CAAC;MACjBK,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE;IACjB,CAAC;IAED,MAAMC,MAAK,GAAIR,QAAQ,CAAC;MACpBS,mBAAmB,EAAE,KAAK;MAC1BC,SAAS,EAAE;IACf,CAAC;IAED,MAAM;MAACC;IAAK,IAAIT,kBAAkB,CAAC;IACnC,MAAMU,SAAQ,GAAI,MAAAA,CAAA,KAAW;MAEzBJ,MAAM,CAACE,SAAQ,GAAI,IAAG;MACtB,MAAMG,IAAG,GAAI,MAAM,IAAIF,KAAK,CAACG,QAAQ,CAACH,KAAK,CAACI,KAAK,CAACC,CAAC,CAAC,CAAC,CAACC,SAAS,EAAEb,GAAG,CAAC,CAACc,QAAQ,CAAC;MAC/E,IAAIL,IAAI,CAACM,IAAI,CAACC,IAAG,KAAM,GAAG,EAAE;QACxB,IAAIT,KAAK,CAACU,KAAK,CAAC,aAAa,EAAE,OAAO,CAAC,CAACC,MAAM,CAAC;MACnD;MACAd,MAAM,CAACE,SAAQ,GAAI,KAAI;MACvBF,MAAM,CAACC,mBAAkB,GAAI,KAAI;MACjCE,KAAK,CAACY,KAAK,CAAC,WAAW;IAC3B;IAEA,MAAMC,eAAc,GAAKC,SAAS,IAAI;MAClCjB,MAAM,CAACC,mBAAkB,GAAI,IAAG;MAChCL,GAAG,CAACC,EAAC,GAAIoB,SAAS,CAACpB,EAAC;MACpBD,GAAG,CAACE,IAAG,GAAImB,SAAS,CAACnB,IAAG;MACxBF,GAAG,CAACG,WAAU,GAAIkB,SAAS,CAAClB,WAAU;IAC1C;IAEA,OAAO;MAAC,GAAGN,MAAM,CAACG,GAAG,CAAC;MAAEI,MAAM;MAAEI,SAAS;MAAEY;IAAe;EAC9D;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}