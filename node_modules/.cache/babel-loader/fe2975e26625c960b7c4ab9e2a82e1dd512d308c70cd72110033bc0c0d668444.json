{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", null, \"数据删除后不可恢复，确认要删除本条数据吗？\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_dialog, {\n    modelValue: $setup.res.centerDialogVisible,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.res.centerDialogVisible = $event),\n    title: \"提示\",\n    width: \"30%\",\n    \"align-center\": \"\",\n    \"close-on-click-modal\": false\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", null, [_createVNode(_component_el_button, {\n      onClick: _cache[0] || (_cache[0] = $event => $setup.res.centerDialogVisible = false)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"取消\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.deleteVm,\n      loading: $setup.res.isLoading\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"确认\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])])]),\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_createVNode","_component_el_dialog","$setup","res","centerDialogVisible","$event","title","width","footer","_withCtx","_component_el_button","onClick","_cache","type","deleteVm","loading","isLoading","_hoisted_1"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\resource\\vm\\components\\deletevm-dialog.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-dialog\r\n            v-model=\"res.centerDialogVisible\"\r\n            title=\"提示\"\r\n            width=\"30%\"\r\n            align-center\r\n            :close-on-click-modal=\"false\"\r\n            \r\n        >\r\n            <span>数据删除后不可恢复，确认要删除本条数据吗？</span>\r\n            <template #footer>\r\n            <span >\r\n                <el-button @click=\"res.centerDialogVisible = false\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"deleteVm\" :loading=\"res.isLoading\">确认</el-button>\r\n            </span>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {reactive, getCurrentInstance} from 'vue'\r\n\r\n\r\nexport default {\r\n    setup() {\r\n        const {proxy} = getCurrentInstance()\r\n        const res = reactive({\r\n            centerDialogVisible: false,\r\n            VmId: 0,\r\n            isLoading: false \r\n        })\r\n        \r\n        //删除虚拟机数据\r\n        const deleteVm = async() => {\r\n            res.isLoading = true\r\n           \r\n            const rest = await new proxy.$request(proxy.$urls.m().vmdelete + \"?id=\" + res.VmId).modedelete()\r\n      \r\n            if (rest.data.code !== 200 ) {\r\n                new proxy.$tips(\"删除虚拟机数据失败，稍后重试\", \"error\").notify()\r\n            } \r\n            res.centerDialogVisible = false\r\n            proxy.$emit('flushPage')\r\n            res.isLoading = false        \r\n           \r\n        }\r\n\r\n        // 被父组件调用\r\n        function deleteVmDialog(VmId) {\r\n            res.centerDialogVisible = true\r\n            res.VmId = VmId\r\n        }\r\n\r\n        return {res, deleteVm,deleteVmDialog}\r\n    }\r\n}\r\n</script>"],"mappings":";gCAUYA,mBAAA,CAAkC,cAA5B,uBAAqB;;;;;uBATnCC,mBAAA,CAiBM,cAhBFC,YAAA,CAeYC,oBAAA;gBAdCC,MAAA,CAAAC,GAAG,CAACC,mBAAmB;+DAAvBF,MAAA,CAAAC,GAAG,CAACC,mBAAmB,GAAAC,MAAA;IAChCC,KAAK,EAAC,IAAI;IACVC,KAAK,EAAC,KAAK;IACX,cAAY,EAAZ,EAAY;IACX,sBAAoB,EAAE;;IAIZC,MAAM,EAAAC,QAAA,CACjB,MAGO,CAHPX,mBAAA,CAGO,eAFHE,YAAA,CAAkEU,oBAAA;MAAtDC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAP,MAAA,IAAEH,MAAA,CAAAC,GAAG,CAACC,mBAAmB;;wBAAU,MAAE,C,iBAAF,IAAE,E;;QACtDJ,YAAA,CAAmFU,oBAAA;MAAxEG,IAAI,EAAC,SAAS;MAAEF,OAAK,EAAET,MAAA,CAAAY,QAAQ;MAAGC,OAAO,EAAEb,MAAA,CAAAC,GAAG,CAACa;;wBAAW,MAAE,C,iBAAF,IAAE,E;;;sBAJ3E,MAAkC,CAAlCC,UAAkC,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}