{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Box, Management } from '@element-plus/icons-vue';\nimport { onMounted, reactive, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  components: {\n    Box,\n    Management\n  },\n  setup() {\n    const menuArr = [{\n      id: '1',\n      icon: \"Box\",\n      title: \"资源管理\",\n      router: \"\",\n      subClass: [{\n        id: '1-1',\n        title: \"物理机管理\",\n        router: \"server\"\n      }, {\n        id: '1-2',\n        title: \"虚拟机管理\",\n        router: \"vm\"\n      }, {\n        id: '1-3',\n        title: \"网络设备管理\",\n        router: \"networks\"\n      }, {\n        id: '1-4',\n        title: \"资源分组管理\",\n        router: \"tag\"\n      }]\n    }, {\n      id: '2',\n      icon: \"Management\",\n      title: \"系统\",\n      router: \"\",\n      subClass: [{\n        id: '2-1',\n        title: \"用户管理\",\n        router: \"user\"\n      }]\n    }];\n    const router = useRouter();\n\n    // 菜单激活回调函数。将当前激活菜单index存入本地缓存，刷新页面后也可激活前面选中菜单\n    function Select(index, item) {\n      localStorage.setItem('menuidex', JSON.stringify(index));\n      router.push({\n        name: item.router\n      });\n    }\n\n    // 首次进入时值置为“1-1”\n    const ac_index = ref(\"\");\n    onMounted(() => {\n      const menuindex = JSON.parse(localStorage.getItem('menuidex'));\n      if (menuindex == null) {\n        ac_index.value = \"1-1\";\n      } else {\n        ac_index.value = menuindex;\n      }\n    });\n    const menu = reactive(menuArr);\n    return {\n      menu,\n      ac_index,\n      Select\n    };\n  }\n};","map":{"version":3,"names":["Box","Management","onMounted","reactive","ref","useRouter","components","setup","menuArr","id","icon","title","router","subClass","Select","index","item","localStorage","setItem","JSON","stringify","push","name","ac_index","menuindex","parse","getItem","value","menu"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\index\\index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        // 顶部\r\n        <div class=\"sidebar-top\">\r\n            <div>资源管理系统</div>\r\n            <div>退出</div>\r\n        </div>\r\n        // 侧边栏菜单\r\n        <div class=\"sidebar-cont\">\r\n            <el-menu :default-active=\"ac_index\" @select=\"Select\">\r\n                    <div v-for=\"(item,index) in menu\" :key=\"index\">\r\n                        <el-menu-item v-if=\"item.subClass.length == 0\" :index=\"item.id\"> \r\n                            <el-icon>\r\n                                <component :is=\"item.icon\"></component>\r\n                            </el-icon>\r\n                            <span>{{ item.title }}</span>\r\n                        </el-menu-item>\r\n                        <el-sub-menu v-if=\"item.subClass.length > 0\" :index=\"item.id\">\r\n                            <template #title>\r\n                                <el-icon>\r\n                                    <component :is=\"item.icon\"></component>\r\n                                </el-icon>\r\n                                <span>{{ item.title }}</span>\r\n                            </template>\r\n                            <div v-for=\"(v,k) in item.subClass\" :key=\"k\">\r\n                                <el-menu-item :index=\"v.id\">{{ v.title }}</el-menu-item>\r\n                            </div>\r\n                        </el-sub-menu>\r\n                    </div>\r\n            </el-menu>\r\n        </div>\r\n        <router-view></router-view>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {Box, Management} from '@element-plus/icons-vue'\r\nimport { onMounted, reactive, ref } from 'vue'\r\nimport {useRouter} from 'vue-router'\r\n\r\nexport default{\r\n    components: {\r\n        Box,\r\n        Management\r\n    },\r\n    setup() {\r\n        const menuArr = [\r\n            {\r\n                id: '1',\r\n                icon: \"Box\",\r\n                title: \"资源管理\",\r\n                router: \"\",\r\n                subClass: [\r\n                    {\r\n                        id: '1-1',\r\n                        title: \"物理机管理\",\r\n                        router: \"server\"\r\n                    },\r\n                    {\r\n                        id: '1-2',\r\n                        title: \"虚拟机管理\",\r\n                        router: \"vm\"\r\n                    },\r\n                    {\r\n                        id: '1-3',\r\n                        title: \"网络设备管理\",\r\n                        router: \"networks\"\r\n                    },\r\n                    {\r\n                        id: '1-4',\r\n                        title: \"资源分组管理\",\r\n                        router: \"tag\"\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                id: '2',\r\n                icon: \"Management\",\r\n                title: \"系统\",\r\n                router: \"\",\r\n                subClass: [\r\n                    {\r\n                        id: '2-1',\r\n                        title: \"用户管理\",\r\n                        router: \"user\"\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n        \r\n        const router = useRouter()\r\n\r\n        // 菜单激活回调函数。将当前激活菜单index存入本地缓存，刷新页面后也可激活前面选中菜单\r\n        function Select(index,item) {\r\n            localStorage.setItem('menuidex',JSON.stringify(index))\r\n            \r\n            router.push({name:item.router})\r\n        }\r\n\r\n        // 首次进入时值置为“1-1”\r\n        const ac_index = ref(\"\")\r\n        onMounted(()=>{\r\n            const menuindex = JSON.parse(localStorage.getItem('menuidex'))\r\n            if (menuindex == null) {\r\n                ac_index.value = \"1-1\"\r\n            } else {\r\n                ac_index.value = menuindex\r\n            }\r\n            \r\n            \r\n        })\r\n\r\n        const menu = reactive(menuArr)\r\n        return {menu, ac_index, Select}\r\n    }\r\n}\r\n</script>"],"mappings":";AAoCA,SAAQA,GAAG,EAAEC,UAAU,QAAO,yBAAwB;AACtD,SAASC,SAAS,EAAEC,QAAQ,EAAEC,GAAE,QAAS,KAAI;AAC7C,SAAQC,SAAS,QAAO,YAAW;AAEnC,eAAc;EACVC,UAAU,EAAE;IACRN,GAAG;IACHC;EACJ,CAAC;EACDM,KAAKA,CAAA,EAAG;IACJ,MAAMC,OAAM,GAAI,CACZ;MACIC,EAAE,EAAE,GAAG;MACPC,IAAI,EAAE,KAAK;MACXC,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,CACN;QACIJ,EAAE,EAAE,KAAK;QACTE,KAAK,EAAE,OAAO;QACdC,MAAM,EAAE;MACZ,CAAC,EACD;QACIH,EAAE,EAAE,KAAK;QACTE,KAAK,EAAE,OAAO;QACdC,MAAM,EAAE;MACZ,CAAC,EACD;QACIH,EAAE,EAAE,KAAK;QACTE,KAAK,EAAE,QAAQ;QACfC,MAAM,EAAE;MACZ,CAAC,EACD;QACIH,EAAE,EAAE,KAAK;QACTE,KAAK,EAAE,QAAQ;QACfC,MAAM,EAAE;MACZ;IAER,CAAC,EACD;MACIH,EAAE,EAAE,GAAG;MACPC,IAAI,EAAE,YAAY;MAClBC,KAAK,EAAE,IAAI;MACXC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,CACN;QACIJ,EAAE,EAAE,KAAK;QACTE,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE;MACZ;IAER,EACJ;IAEA,MAAMA,MAAK,GAAIP,SAAS,CAAC;;IAEzB;IACA,SAASS,MAAMA,CAACC,KAAK,EAACC,IAAI,EAAE;MACxBC,YAAY,CAACC,OAAO,CAAC,UAAU,EAACC,IAAI,CAACC,SAAS,CAACL,KAAK,CAAC;MAErDH,MAAM,CAACS,IAAI,CAAC;QAACC,IAAI,EAACN,IAAI,CAACJ;MAAM,CAAC;IAClC;;IAEA;IACA,MAAMW,QAAO,GAAInB,GAAG,CAAC,EAAE;IACvBF,SAAS,CAAC,MAAI;MACV,MAAMsB,SAAQ,GAAIL,IAAI,CAACM,KAAK,CAACR,YAAY,CAACS,OAAO,CAAC,UAAU,CAAC;MAC7D,IAAIF,SAAQ,IAAK,IAAI,EAAE;QACnBD,QAAQ,CAACI,KAAI,GAAI,KAAI;MACzB,OAAO;QACHJ,QAAQ,CAACI,KAAI,GAAIH,SAAQ;MAC7B;IAGJ,CAAC;IAED,MAAMI,IAAG,GAAIzB,QAAQ,CAACK,OAAO;IAC7B,OAAO;MAACoB,IAAI;MAAEL,QAAQ;MAAET;IAAM;EAClC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}