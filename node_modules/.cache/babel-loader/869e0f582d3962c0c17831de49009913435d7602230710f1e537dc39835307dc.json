{"ast":null,"code":"import { reactive, toRefs, getCurrentInstance, ref } from \"vue\";\nimport { Base64 } from 'js-base64';\nimport { ElMessage } from \"element-plus\";\nexport default {\n  setup() {\n    const {\n      proxy\n    } = getCurrentInstance();\n    const user = reactive({\n      account: '',\n      password: ''\n    });\n    const loginErr = ref('');\n    const login = async () => {\n      const obj = {\n        username: user.account,\n        password: Base64.encode(user.password)\n      };\n      const rest = await new proxy.$request(proxy.$urls.m().login, obj).modeput();\n      if (rest.data.code !== 200) {\n        loginErr = \"用户名或密码错误,请重新输入\";\n      }\n      ElMessage(rest.data.message);\n    };\n    return {\n      ...toRefs(user),\n      login,\n      loginErr\n    };\n  }\n};","map":{"version":3,"names":["reactive","toRefs","getCurrentInstance","ref","Base64","ElMessage","setup","proxy","user","account","password","loginErr","login","obj","username","encode","rest","$request","$urls","m","modeput","data","code","message"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\login\\login.vue"],"sourcesContent":["<template>\r\n    <div id='backcont'>  \r\n        <div id=\"gifcont\">\r\n\r\n        </div>\r\n    </div>\r\n    <div class=\"meituan-content\">\r\n\r\n        <div class=\"login-content\">\r\n        \r\n            <div class=\"login-title \">\r\n                登录    \r\n                <div>\r\n                    {{ loginErr }}\r\n                </div>        \r\n                <div class=\"login-user\">\r\n                    <p class=\"login-user-p\">\r\n                        <el-input v-model=\"account\" clearable  class=\"inputflex\"  placeholder=\"用户名\" />\r\n                    </p>\r\n                </div>\r\n                <div class=\"login-user\">\r\n                    <p class=\"login-user-p\">\r\n                        <el-input v-model=\"password\" clearable class=\"inputflex\" type=\"password\" placeholder=\"密码\" show-password />\r\n                    </p>\r\n                </div>\r\n\r\n                <p>\r\n                    <el-button type=\"primary\" @click=\"login\" class=\"login-botton\">登录</el-button>\r\n                </p>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { reactive, toRefs, getCurrentInstance,ref } from \"vue\"\r\nimport { Base64 } from 'js-base64'\r\nimport { ElMessage } from \"element-plus\"\r\n\r\nexport default {\r\n    setup(){\r\n        const {proxy} = getCurrentInstance()\r\n        const user = reactive({\r\n            account: '',\r\n            password: ''\r\n        })\r\n        const loginErr = ref('')\r\n        const login = async()=> {\r\n            const obj = {\r\n                username: user.account,\r\n                password: Base64.encode(user.password)\r\n            }\r\n            const rest = await new proxy.$request(proxy.$urls.m().login, obj).modeput()\r\n            if (rest.data.code !== 200 ) {\r\n                loginErr = \"用户名或密码错误,请重新输入\"\r\n            }\r\n            ElMessage(rest.data.message)\r\n        }\r\n\r\n        return { ...toRefs(user), login, loginErr }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAsCA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,kBAAkB,EAACC,GAAE,QAAS,KAAI;AAC7D,SAASC,MAAK,QAAS,WAAU;AACjC,SAASC,SAAQ,QAAS,cAAa;AAEvC,eAAe;EACXC,KAAKA,CAAA,EAAE;IACH,MAAM;MAACC;IAAK,IAAIL,kBAAkB,CAAC;IACnC,MAAMM,IAAG,GAAIR,QAAQ,CAAC;MAClBS,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACd,CAAC;IACD,MAAMC,QAAO,GAAIR,GAAG,CAAC,EAAE;IACvB,MAAMS,KAAI,GAAI,MAAAA,CAAA,KAAU;MACpB,MAAMC,GAAE,GAAI;QACRC,QAAQ,EAAEN,IAAI,CAACC,OAAO;QACtBC,QAAQ,EAAEN,MAAM,CAACW,MAAM,CAACP,IAAI,CAACE,QAAQ;MACzC;MACA,MAAMM,IAAG,GAAI,MAAM,IAAIT,KAAK,CAACU,QAAQ,CAACV,KAAK,CAACW,KAAK,CAACC,CAAC,CAAC,CAAC,CAACP,KAAK,EAAEC,GAAG,CAAC,CAACO,OAAO,CAAC;MAC1E,IAAIJ,IAAI,CAACK,IAAI,CAACC,IAAG,KAAM,GAAE,EAAI;QACzBX,QAAO,GAAI,gBAAe;MAC9B;MACAN,SAAS,CAACW,IAAI,CAACK,IAAI,CAACE,OAAO;IAC/B;IAEA,OAAO;MAAE,GAAGtB,MAAM,CAACO,IAAI,CAAC;MAAEI,KAAK;MAAED;IAAS;EAC9C;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}