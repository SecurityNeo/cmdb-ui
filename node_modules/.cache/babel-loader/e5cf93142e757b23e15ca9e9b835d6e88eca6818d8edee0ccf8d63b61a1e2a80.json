{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport { Terminal } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit';\nimport 'xterm/css/xterm.css';\nimport { debounce } from 'lodash';\nimport { getCurrentInstance } from 'vue';\nconst packResize = (cols, rows) => {\n  JSON.stringify({\n    type: 'resize',\n    cols: cols,\n    rows: rows\n  });\n};\nexport default {\n  name: 'MyTerminal',\n  created() {\n    this.form.ip = this.$route.query.ip || '';\n    this.form.port = this.$route.query.port || '';\n  },\n  data() {\n    var validate = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('不能为空'));\n      } else {\n        callback();\n      }\n    };\n    const {\n      proxy\n    } = getCurrentInstance();\n    return {\n      rules: {\n        ip: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        port: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        user: [{\n          validator: validate,\n          trigger: 'blur'\n        }],\n        pwd: [{\n          validator: validate,\n          trigger: 'blur'\n        }]\n      },\n      activeName: 'first',\n      initText: '正在努力连接...\\r\\n',\n      first: true,\n      term: null,\n      fitAddon: null,\n      ws: null,\n      socketUrl: proxy.$urls.m().ws,\n      form: {\n        user: 'root',\n        pwd: '',\n        ip: '',\n        port: '22'\n      },\n      option: {\n        lineHeight: 1.2,\n        cursorBlink: true,\n        cursorStyle: 'block',\n        // 光标样式 'block' | 'underline' | 'bar'\n        fontSize: 15,\n        // fontcolor: '#000000',\n        fontFamily: \"Monaco, Menlo, Consolas, 'Courier New', monospace\",\n        theme: {\n          // 背景色\n          background: '#ffffff',\n          // 前景色\n          foreground: '#000000',\n          // 光标背景色\n          cursor: '#000000',\n          // 光标前景色\n          /** The accent color of the cursor (fg color for a block cursor) */\n          // cursorAccent: '#000000',\n          // 选择背景色\n          /** The selection background color (can be transparent) */\n          selection: '#0000ff',\n          // 选择前景色\n          /** The selection foreground color */\n          selectionForeground: '#0000ff'\n        },\n        cols: 30 // 初始化的时候不要设置fit，设置col为较小值（最小为可展示initText初始文字即可）方便屏幕缩放\n      }\n    };\n  },\n\n  // mounted() {\n  //   this.initTerm()\n  //   this.initSocket()\n  //\n  //   this.onTerminalResize()\n  //   this.onTerminalKeyPress()\n  // },\n  beforeDestroy() {\n    this.removeResizeListener();\n    this.term && this.term.dispose();\n    this.ws.send(JSON.stringify({\n      type: 'stdin',\n      data: this.utf8_to_b64('exit')\n    }));\n  },\n  methods: {\n    destroyed() {\n      this.ws.send(JSON.stringify({\n        type: 'stdin',\n        data: this.utf8_to_b64('exit')\n      }));\n    },\n    initWs() {\n      this.initTerm();\n      this.initSocket();\n      this.onTerminalResize();\n      this.onTerminalKeyPress();\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.activeName = 'second';\n          this.initWs();\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    handleClick(tab, event) {\n      if (tab.name === 'second') {\n        // this.init()\n      }\n    },\n    utf8_to_b64(rawString) {\n      return btoa(unescape(encodeURIComponent(rawString)));\n    },\n    b64_to_utf8(encodeString) {\n      return decodeURIComponent(escape(atob(encodeString)));\n    },\n    bytesHuman(bytes, precision) {\n      if (!/^([-+])?|(\\.\\d+)(\\d+(\\.\\d+)?|(\\d+\\.)|Infinity)$/.test(bytes)) {\n        return '-';\n      }\n      if (bytes === 0) return '0';\n      if (typeof precision === 'undefined') precision = 1;\n      const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB', 'BB'];\n      const num = Math.floor(Math.log(bytes) / Math.log(1024));\n      const value = (bytes / Math.pow(1024, Math.floor(num))).toFixed(precision);\n      return `${value} ${units[num]}`;\n    },\n    isWsOpen() {\n      return this.ws && this.ws.readyState === 1;\n    },\n    initTerm() {\n      this.term = new Terminal(this.option);\n      this.fitAddon = new FitAddon();\n      this.term.loadAddon(this.fitAddon);\n      this.term.open(this.$refs.terminal);\n      // this.fitAddon.fit() // 初始化的时候不要使用fit\n      setTimeout(() => {\n        this.fitAddon.fit();\n      }, 500); // 必须延时处理\n    },\n\n    onTerminalKeyPress() {\n      this.term.onData(data => {\n        this.isWsOpen() && this.ws.send(JSON.stringify({\n          type: 'stdin',\n          data: this.utf8_to_b64(data)\n        }));\n      });\n    },\n    // resize 相关\n    resizeRemoteTerminal() {\n      const {\n        cols,\n        rows\n      } = this.term;\n      console.log('列数、行数设置为：', cols, rows);\n      // 调整后端终端大小 使后端与前端终端大小一致\n      this.isWsOpen() && this.ws.send(packResize(cols, rows));\n    },\n    onResize: debounce(function () {\n      this.fitAddon.fit();\n    }, 500),\n    onTerminalResize() {\n      window.addEventListener('resize', this.onResize);\n      this.term.onResize(this.resizeRemoteTerminal);\n    },\n    removeResizeListener() {\n      window.removeEventListener('resize', this.onResize);\n    },\n    // socket\n    initSocket() {\n      this.term.write(this.initText);\n      console.log(this.socketUrl);\n      this.ws = new WebSocket(this.socketUrl, ['webssh']);\n      this.onOpenSocket();\n      this.onCloseSocket();\n      this.onErrorSocket();\n      this.term._initialized = true;\n      this.onMessageSocket();\n    },\n    // 打开连接\n    onOpenSocket() {\n      this.ws.onopen = () => {\n        console.log('websocket 已连接');\n        this.ws.send(JSON.stringify({\n          type: \"addr\",\n          data: this.utf8_to_b64(this.form.ip + ':' + this.form.port)\n        }));\n        // socket.send(JSON.stringify({ type: \"term\", data: utf8_to_b64(\"linux\") }));\n        this.ws.send(JSON.stringify({\n          type: \"login\",\n          data: this.utf8_to_b64(this.form.user)\n        }));\n        this.ws.send(JSON.stringify({\n          type: \"password\",\n          data: this.utf8_to_b64(this.form.pwd)\n        }));\n        this.term.reset();\n        setTimeout(() => {\n          this.resizeRemoteTerminal();\n        }, 500);\n      };\n    },\n    // 关闭连接\n    onCloseSocket() {\n      this.ws.onclose = () => {\n        console.log('关闭连接');\n        this.term.write('未连接， 刷新后重连...\\r\\n');\n        // setTimeout(() => {\n        //   this.initSocket();\n        // }, 3000)\n      };\n    },\n\n    // 连接错误\n    onErrorSocket() {\n      this.ws.onerror = () => {\n        this.term.write('连接失败，请刷新！');\n      };\n    },\n    // 接收消息\n    onMessageSocket() {\n      this.ws.onmessage = res => {\n        console.log(res);\n        const msg = JSON.parse(res.data);\n        const term = this.term;\n        // console.log(\"receive: \" + data)\n        // 第一次连接成功将 initText 清空\n        if (this.first) {\n          this.first = false;\n          term.reset();\n          term.element && term.focus();\n          this.resizeRemoteTerminal();\n        }\n        term.write(this.b64_to_utf8(msg.data));\n      };\n    }\n  }\n};\n//","map":{"version":3,"names":["Terminal","FitAddon","debounce","getCurrentInstance","packResize","cols","rows","JSON","stringify","type","name","created","form","ip","$route","query","port","data","validate","rule","value","callback","Error","proxy","rules","validator","trigger","user","pwd","activeName","initText","first","term","fitAddon","ws","socketUrl","$urls","m","option","lineHeight","cursorBlink","cursorStyle","fontSize","fontFamily","theme","background","foreground","cursor","selection","selectionForeground","beforeDestroy","removeResizeListener","dispose","send","utf8_to_b64","methods","destroyed","initWs","initTerm","initSocket","onTerminalResize","onTerminalKeyPress","submitForm","formName","$refs","valid","console","log","resetForm","resetFields","handleClick","tab","event","rawString","btoa","unescape","encodeURIComponent","b64_to_utf8","encodeString","decodeURIComponent","escape","atob","bytesHuman","bytes","precision","test","units","num","Math","floor","pow","toFixed","isWsOpen","readyState","loadAddon","open","terminal","setTimeout","fit","onData","resizeRemoteTerminal","onResize","window","addEventListener","removeEventListener","write","WebSocket","onOpenSocket","onCloseSocket","onErrorSocket","_initialized","onMessageSocket","onopen","reset","onclose","onerror","onmessage","res","msg","parse","element","focus"],"sources":["D:\\src\\github.com\\SecurityNeo\\cmdb-ui\\src\\page\\webssh\\webssh.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\" style=\"margin-left: 1vh; margin-right: 1vh\">\r\n        <el-tab-pane name=\"first\" label=\"连接配置\">\r\n            <div style=\"text-align: center\">\r\n                <el-form ref=\"form\" :model=\"form\" status-icon :rules=\"rules\" label-position=\"left\" label-width=\"80px\" style=\"margin-left: 50vh; width: 50vh\">\r\n                    <el-form-item label=\"IP地址\" prop=\"ip\">\r\n                        <el-input v-model=\"form.ip\"/>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"端口\" prop=\"port\">\r\n                        <el-input v-model=\"form.port\"/>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"用户名\" prop=\"user\">\r\n                        <el-input v-model=\"form.user\"/>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"密码\" prop=\"pwd\">\r\n                        <el-input v-model=\"form.pwd\" />\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"submitForm('form')\">连接</el-button>\r\n                        <el-button @click=\"resetForm('form')\">重置</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane name=\"second\" label=\"终端\">\r\n            <div class=\"ssh-container\" ref=\"terminal\"></div>\r\n        </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Terminal } from 'xterm'\r\nimport { FitAddon } from 'xterm-addon-fit'\r\nimport 'xterm/css/xterm.css'\r\nimport { debounce } from 'lodash'\r\nimport { getCurrentInstance } from 'vue'\r\n\r\n\r\nconst packResize = (cols, rows) => {\r\n    JSON.stringify({\r\n        type: 'resize',\r\n        cols: cols,\r\n        rows: rows\r\n    })\r\n}\r\n\r\nexport default {\r\n    name: 'MyTerminal',\r\n    created() {\r\n        this.form.ip = this.$route.query.ip || ''\r\n        this.form.port = this.$route.query.port || ''\r\n    },\r\n    data() {\r\n        var validate = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('不能为空'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        const {proxy} = getCurrentInstance()\r\n        return {\r\n            rules: {\r\n                ip: [\r\n                    {validator: validate, trigger: 'blur'}\r\n                ],\r\n                port: [\r\n                    {validator: validate, trigger: 'blur'}\r\n                ],\r\n                user: [\r\n                    {validator: validate, trigger: 'blur'}\r\n                ],\r\n                pwd: [\r\n                    {validator: validate, trigger: 'blur'}\r\n                ],\r\n            },\r\n            activeName: 'first',\r\n            initText: '正在努力连接...\\r\\n',\r\n            first: true,\r\n            term: null,\r\n            fitAddon: null,\r\n            ws: null,\r\n            socketUrl: proxy.$urls.m().ws,\r\n            form: {\r\n                user: 'root',\r\n                pwd: '',\r\n                ip: '',\r\n                port: '22',\r\n            },\r\n            option: {\r\n                lineHeight: 1.2,\r\n                cursorBlink: true,\r\n                cursorStyle: 'block', // 光标样式 'block' | 'underline' | 'bar'\r\n                fontSize: 15,\r\n                // fontcolor: '#000000',\r\n                fontFamily: \"Monaco, Menlo, Consolas, 'Courier New', monospace\",\r\n                theme: {\r\n                // 背景色\r\n                background: '#ffffff',\r\n                // 前景色\r\n                foreground: '#000000',\r\n                // 光标背景色\r\n                cursor: '#000000',\r\n                // 光标前景色\r\n                /** The accent color of the cursor (fg color for a block cursor) */\r\n                // cursorAccent: '#000000',\r\n                // 选择背景色\r\n                /** The selection background color (can be transparent) */\r\n                selection: '#0000ff',\r\n                // 选择前景色\r\n                /** The selection foreground color */\r\n                selectionForeground: '#0000ff'\r\n                },\r\n                cols: 30 // 初始化的时候不要设置fit，设置col为较小值（最小为可展示initText初始文字即可）方便屏幕缩放\r\n            }\r\n        }\r\n    },\r\n    // mounted() {\r\n    //   this.initTerm()\r\n    //   this.initSocket()\r\n    //\r\n    //   this.onTerminalResize()\r\n    //   this.onTerminalKeyPress()\r\n    // },\r\n    beforeDestroy() {\r\n        this.removeResizeListener()\r\n        this.term && this.term.dispose()\r\n        this.ws.send(JSON.stringify({\r\n            type: 'stdin',\r\n            data: this.utf8_to_b64('exit')\r\n        }))\r\n    },\r\n    methods: {\r\n        destroyed(){\r\n            this.ws.send(JSON.stringify({\r\n                type: 'stdin',\r\n                data: this.utf8_to_b64('exit')\r\n            }))\r\n        },\r\n        initWs() {\r\n            this.initTerm()\r\n            this.initSocket()\r\n            this.onTerminalResize()\r\n            this.onTerminalKeyPress()\r\n        },\r\n        submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n            if (valid) {\r\n                this.activeName = 'second'\r\n                this.initWs()\r\n            } else {\r\n                console.log('error submit!!');\r\n                return false;\r\n            }\r\n        });\r\n        },\r\n        resetForm(formName) {\r\n            this.$refs[formName].resetFields();\r\n        },\r\n        handleClick(tab, event) {\r\n            if (tab.name === 'second') {\r\n                // this.init()\r\n            }\r\n        },\r\n        utf8_to_b64(rawString) {\r\n            return btoa(unescape(encodeURIComponent(rawString)));\r\n        },\r\n        b64_to_utf8(encodeString) {\r\n            return decodeURIComponent(escape(atob(encodeString)));\r\n        },\r\n        bytesHuman(bytes, precision) {\r\n            if (!/^([-+])?|(\\.\\d+)(\\d+(\\.\\d+)?|(\\d+\\.)|Infinity)$/.test(bytes)) {\r\n                return '-'\r\n            }\r\n            if (bytes === 0) return '0';\r\n            if (typeof precision === 'undefined') precision = 1;\r\n            const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB', 'BB'];\r\n            const num = Math.floor(Math.log(bytes) / Math.log(1024));\r\n            const value = (bytes / Math.pow(1024, Math.floor(num))).toFixed(precision);\r\n            return `${value} ${units[num]}`\r\n        },\r\n        isWsOpen() {\r\n            return this.ws && this.ws.readyState === 1\r\n        },\r\n        initTerm() {\r\n            this.term = new Terminal(this.option)\r\n            this.fitAddon = new FitAddon()\r\n            this.term.loadAddon(this.fitAddon)\r\n            this.term.open(this.$refs.terminal)\r\n            // this.fitAddon.fit() // 初始化的时候不要使用fit\r\n            setTimeout(() => {\r\n                this.fitAddon.fit()\r\n            }, 500); // 必须延时处理\r\n        },\r\n        onTerminalKeyPress() {\r\n        this.term.onData(data => {\r\n            this.isWsOpen() && this.ws.send(JSON.stringify({\r\n            type: 'stdin',\r\n            data: this.utf8_to_b64(data)\r\n            }))\r\n        })\r\n        },\r\n        // resize 相关\r\n        resizeRemoteTerminal() {\r\n            const { cols, rows } = this.term\r\n            console.log('列数、行数设置为：', cols, rows)\r\n            // 调整后端终端大小 使后端与前端终端大小一致\r\n            this.isWsOpen() && this.ws.send(packResize(cols, rows))\r\n        },\r\n        onResize: debounce(function () {\r\n            this.fitAddon.fit()\r\n        }, 500),\r\n        onTerminalResize() {\r\n            window.addEventListener('resize', this.onResize)\r\n            this.term.onResize(this.resizeRemoteTerminal)\r\n        },\r\n        removeResizeListener() {\r\n            window.removeEventListener('resize', this.onResize)\r\n        },\r\n        // socket\r\n        initSocket() {\r\n            this.term.write(this.initText)\r\n            console.log(this.socketUrl)\r\n            this.ws = new WebSocket(this.socketUrl,['webssh'])\r\n            this.onOpenSocket()\r\n            this.onCloseSocket()\r\n            this.onErrorSocket()\r\n            this.term._initialized = true\r\n            this.onMessageSocket()\r\n        },\r\n        // 打开连接\r\n        onOpenSocket() {\r\n        this.ws.onopen = () => {\r\n            console.log('websocket 已连接')\r\n            this.ws.send(JSON.stringify({ type: \"addr\", data: this.utf8_to_b64(this.form.ip + ':' + this.form.port) }));\r\n            // socket.send(JSON.stringify({ type: \"term\", data: utf8_to_b64(\"linux\") }));\r\n            this.ws.send(JSON.stringify({ type: \"login\", data: this.utf8_to_b64(this.form.user) }));\r\n            this.ws.send(JSON.stringify({ type: \"password\", data: this.utf8_to_b64(this.form.pwd) }));\r\n            this.term.reset()\r\n            setTimeout(() => {\r\n                this.resizeRemoteTerminal()\r\n            }, 500)\r\n        }\r\n        },\r\n\r\n        // 关闭连接\r\n        onCloseSocket() {\r\n            this.ws.onclose = () => {\r\n                console.log('关闭连接')\r\n                this.term.write('未连接， 刷新后重连...\\r\\n');\r\n                // setTimeout(() => {\r\n                //   this.initSocket();\r\n                // }, 3000)\r\n            }\r\n        },\r\n        // 连接错误\r\n        onErrorSocket() {\r\n            this.ws.onerror = () => {\r\n                this.term.write('连接失败，请刷新！')\r\n            }\r\n        },\r\n        // 接收消息\r\n        onMessageSocket() {\r\n        this.ws.onmessage = res => {\r\n            console.log(res)\r\n            const msg = JSON.parse(res.data)\r\n            const term = this.term\r\n            // console.log(\"receive: \" + data)\r\n            // 第一次连接成功将 initText 清空\r\n            if (this.first) {\r\n                this.first = false\r\n                term.reset()\r\n                term.element && term.focus()\r\n                this.resizeRemoteTerminal()\r\n            }\r\n            term.write(this.b64_to_utf8(msg.data))\r\n        }\r\n        }\r\n    }\r\n}\r\n//\r\n</script>\r\n<style lang=\"scss\">\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.ssh-container {\r\n    overflow: hidden;\r\n    height: 85vh;\r\n    border-radius: 4px;\r\n    background: rgb(255, 255, 255);\r\n    padding: 0px;\r\n    //color: rgb(0, 0, 0);\r\n\r\n    .xterm-scroll-area::-webkit-scrollbar-thumb {\r\n        background-color: #b7c4d1;\r\n        /* 滚动条的背景颜色 */\r\n    }\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}